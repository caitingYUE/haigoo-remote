# 岗位详情页设计文档

## 1. 需求分析

### 1.1 功能需求

#### 核心功能
- **职位信息展示**：完整展示职位标题、公司信息、地点、薪资等基本信息
- **职位描述**：详细的职位描述内容，支持富文本格式和优化的列表展示
- **公司信息**：公司简介、规模、行业等关键信息
- **相似职位推荐**：基于当前职位推荐相关职位
- **操作功能**：申请、收藏、分享职位

#### 辅助功能
- **多语言支持**：原文/翻译版本切换，确保内容正确分离
- **职位导航**：在多个职位间快速切换
- **AI匹配度**：显示职位与用户档案的匹配程度
- **响应式设计**：适配不同屏幕尺寸

### 1.2 用户需求
- **快速获取关键信息**：用户能在3秒内了解职位核心信息
- **便捷操作**：一键申请、收藏、分享
- **深度了解**：详细的职位描述和公司信息
- **个性化体验**：基于用户档案的匹配度和推荐
- **舒适的视觉体验**：减少视觉压迫感，提升界面协调性

### 1.3 业务需求
- **提高申请转化率**：优化用户体验，提升申请意愿
- **增强用户粘性**：通过相似职位推荐增加用户停留时间
- **数据收集**：收集用户行为数据用于算法优化

## 2. 交互设计

### 2.1 页面布局

#### 整体结构
```
┌─────────────────────────────────────────┐
│ 导航按钮 (左)    标题区域    控制按钮 (右) │
├─────────────────────────────────────────┤
│              职位概览卡片                │
├─────────────────────────────────────────┤
│              Tab导航栏                  │
├─────────────────────────────────────────┤
│              内容区域                   │
│  ┌─────────────────────────────────────┐ │
│  │         Tab内容                     │ │
│  │  - 职位描述                         │ │
│  │  - 公司信息                         │ │
│  │  - 相似职位                         │ │
│  └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

#### 页面定位
- **位置**：页面右侧滑入
- **尺寸**：固定宽度，全屏高度
- **动画**：从右侧滑入/滑出，过渡时间300ms

### 2.2 交互流程

#### 打开流程
1. 用户点击职位卡片
2. 页面从右侧滑入
3. 加载职位详细信息
4. 显示默认Tab（职位描述）

#### 操作流程
1. **申请职位**：点击申请按钮 → 跳转到申请页面
2. **收藏职位**：点击收藏按钮 → 切换收藏状态 → 显示反馈
3. **分享职位**：点击分享按钮 → 调用系统分享/复制链接
4. **切换语言**：点击翻译按钮 → 切换原文/翻译版本
5. **导航职位**：点击左右箭头 → 切换到相邻职位

#### 关闭流程
1. 点击关闭按钮/背景遮罩
2. 页面向右滑出
3. 返回职位列表

### 2.3 状态管理

#### 页面状态
- **加载状态**：显示骨架屏或加载动画
- **错误状态**：显示错误信息和重试按钮
- **空状态**：显示暂无数据提示

#### 交互状态
- **按钮状态**：默认、悬停、点击、禁用
- **Tab状态**：激活、非激活
- **翻译状态**：原文、翻译版本

## 3. 视觉设计

### 3.1 设计原则

#### 信息层级
1. **主要信息**：职位标题、公司名称（大字体、高对比度）
2. **次要信息**：地点、薪资、工作类型（中等字体）
3. **辅助信息**：发布时间、匹配度（小字体、低对比度）

#### 视觉重点
- **操作按钮**：使用品牌色，突出显示，减少视觉压迫感
- **匹配度**：使用绿色渐变，增强信心
- **公司Logo**：圆角设计，增加亲和力
- **Tab导航**：简洁设计，减少视觉噪音

### 3.2 色彩系统

#### 主色调
- **品牌紫色**：#8B5CF6（主要操作按钮）
- **深紫色**：#7C3AED（悬停状态）
- **浅紫色**：#A78BFA（次要元素）

#### 辅助色彩
- **成功绿色**：#10B981（匹配度、成功状态）
- **警告橙色**：#F59E0B（警告信息）
- **错误红色**：#EF4444（错误状态）
- **中性灰色**：#6B7280（次要文本）

#### 背景色彩
- **主背景**：#FFFFFF（卡片背景）
- **次背景**：#F9FAFB（页面背景）
- **边框色**：#E5E7EB（分割线）

### 3.3 字体系统

#### 字体族
- **主字体**：Inter, system-ui, sans-serif
- **代码字体**：'Fira Code', monospace

#### 字体大小
- **标题1**：text-2xl (24px) - 职位标题
- **标题2**：text-xl (20px) - 公司名称
- **标题3**：text-lg (18px) - Tab标题
- **正文**：text-base (16px) - 主要内容
- **小字**：text-sm (14px) - 辅助信息
- **极小字**：text-xs (12px) - 标签

#### 字重
- **粗体**：font-bold (700) - 重要标题
- **中等**：font-medium (500) - 次要标题
- **常规**：font-normal (400) - 正文内容

### 3.4 间距系统

#### 内边距
- **大间距**：p-6 (24px) - 卡片内边距
- **中间距**：p-4 (16px) - 内容区域
- **小间距**：p-2 (8px) - 按钮内边距

#### 外边距
- **大间距**：mb-6 (24px) - 区块间距
- **中间距**：mb-4 (16px) - 段落间距
- **小间距**：mb-2 (8px) - 行间距

### 3.5 圆角和阴影

#### 圆角
- **大圆角**：rounded-xl (12px) - 卡片
- **中圆角**：rounded-lg (8px) - 按钮
- **小圆角**：rounded-md (6px) - 输入框

#### 阴影
- **卡片阴影**：shadow-lg - 主要卡片
- **按钮阴影**：shadow-md - 操作按钮
- **悬停阴影**：shadow-xl - 悬停状态

## 4. 组件设计

### 4.1 职位概览卡片

#### 布局结构
```
┌─────────────────────────────────────────┐
│ Logo  职位标题                    匹配度  │
│       公司名称 · 地点                    │
│       薪资 · 工作类型 · 发布时间          │
├─────────────────────────────────────────┤
│ [立即申请] [收藏] [分享] [翻译]           │
└─────────────────────────────────────────┘
```

#### 样式规范
- **背景**：白色卡片，圆角12px，阴影
- **内边距**：24px
- **Logo**：64x64px，圆角8px
- **匹配度**：绿色渐变背景，白色文字

### 4.2 Tab导航栏

#### 标签设计
- **默认状态**：灰色文字，无背景
- **激活状态**：紫色文字，浅紫色背景
- **悬停状态**：深灰色文字，浅灰色背景

#### 样式优化
- **减少边框**：移除厚重边框，使用subtle背景色区分
- **优化间距**：适当的内边距，避免拥挤感
- **柔和过渡**：添加smooth过渡效果

### 4.3 操作按钮

#### 主要按钮（立即申请）
- **背景色**：品牌紫色 #8B5CF6
- **文字色**：白色
- **圆角**：8px
- **内边距**：12px 24px
- **阴影**：medium shadow
- **悬停**：深紫色背景，增强阴影

#### 次要按钮（收藏、分享、翻译）
- **背景色**：透明
- **边框**：1px 灰色边框
- **文字色**：深灰色
- **圆角**：8px
- **内边距**：8px 16px
- **悬停**：浅灰色背景

### 4.4 内容区域

#### 职位描述优化
- **列表格式**：使用序号列表和点列表
- **避免冗余**：减少"详情XXX"等重复标题
- **清晰分段**：智能识别职位描述结构
- **格式化**：支持粗体、斜体等富文本

#### 翻译功能优化
- **内容分离**：确保原文和翻译内容正确分离存储
- **清理文本**：移除HTML标签和特殊字符
- **智能翻译**：优先级替换，提高翻译质量

## 5. 技术实现

### 5.1 组件架构

#### 主组件：JobDetailModal
- **状态管理**：使用React Hooks管理组件状态
- **数据获取**：通过props接收职位数据
- **事件处理**：申请、收藏、分享等操作

#### 子组件
- **JobOverviewCard**：职位概览卡片
- **TabNavigation**：Tab导航组件
- **JobDescription**：职位描述组件
- **CompanyInfo**：公司信息组件
- **SimilarJobs**：相似职位组件

### 5.2 数据流

#### 数据传递
```
JobsPage → JobDetailModal → 子组件
```

#### 状态管理
- **本地状态**：当前Tab、翻译状态、收藏状态
- **全局状态**：用户信息、职位列表
- **缓存策略**：职位详情缓存，减少重复请求

### 5.3 性能优化

#### 渲染优化
- **懒加载**：Tab内容按需加载
- **虚拟滚动**：相似职位列表虚拟滚动
- **图片优化**：公司Logo懒加载和压缩

#### 网络优化
- **数据预取**：预加载相邻职位数据
- **请求合并**：批量获取相关数据
- **缓存策略**：合理的缓存时间设置

### 5.4 翻译系统优化

#### 文本处理
- **清理函数**：移除HTML标签和特殊字符
- **格式化**：支持列表、粗体等格式
- **分段处理**：智能识别职位描述结构

#### 翻译逻辑
- **优先级替换**：常用词汇优先翻译
- **上下文理解**：基于职位类型的专业翻译
- **缓存机制**：翻译结果缓存，提高响应速度

## 6. 可访问性设计

### 6.1 键盘导航
- **Tab顺序**：逻辑清晰的Tab导航顺序
- **快捷键**：ESC关闭弹窗，方向键切换Tab
- **焦点管理**：明确的焦点指示器

### 6.2 屏幕阅读器
- **语义化标签**：使用正确的HTML语义标签
- **ARIA属性**：添加必要的ARIA标签
- **文本描述**：为图标和按钮提供文本描述

### 6.3 视觉辅助
- **对比度**：确保足够的颜色对比度
- **字体大小**：支持浏览器字体缩放
- **色彩辅助**：不仅依赖颜色传达信息
- **动画控制**：支持减少动画偏好设置

## 7. 测试策略

### 7.1 功能测试
- **基础功能**：打开、关闭、导航
- **操作功能**：申请、收藏、分享
- **翻译功能**：语言切换、内容翻译、文本清理
- **响应式**：不同屏幕尺寸适配

### 7.2 性能测试
- **加载时间**：首次加载和切换速度
- **内存使用**：长时间使用内存泄漏
- **动画性能**：60fps流畅度
- **网络优化**：弱网环境表现

### 7.3 用户体验测试
- **易用性测试**：用户完成任务的效率
- **可访问性测试**：辅助技术兼容性
- **跨浏览器测试**：主流浏览器兼容性
- **移动端测试**：触摸操作体验

### 7.4 视觉回归测试
- **UI一致性**：确保视觉设计符合规范
- **响应式布局**：不同屏幕尺寸下的表现
- **交互状态**：按钮、Tab等交互状态正确

## 8. 维护和迭代

### 8.1 数据埋点
- **页面访问**：打开次数、停留时间
- **操作行为**：申请、收藏、分享点击率
- **内容消费**：Tab切换、翻译使用
- **性能指标**：加载时间、错误率

### 8.2 优化方向
- **个性化推荐**：基于用户行为优化相似职位
- **智能翻译**：提升翻译质量和速度
- **交互优化**：基于用户反馈改进交互流程
- **内容丰富**：增加更多职位和公司信息

### 8.3 版本规划
- **v1.0**：基础功能实现
- **v1.1**：性能优化和bug修复
- **v1.2**：新增个性化功能
- **v2.0**：重大功能升级

## 9. 最新优化记录

### 9.1 UI视觉优化 (2024年12月)
- **按钮优化**：减少立即申请按钮的视觉压迫感
  - 调整padding从px-8 py-3改为px-6 py-2.5
  - 优化圆角从rounded-lg改为rounded-md
  - 调整字体大小从text-base改为text-sm
  - 优化阴影效果，使用更柔和的shadow-md

- **Tab导航优化**：提升界面协调性
  - 移除厚重的边框设计
  - 使用subtle的背景色区分激活状态
  - 优化内边距和圆角，减少视觉噪音
  - 添加smooth过渡效果

### 9.2 内容处理优化 (2024年12月)
- **翻译系统优化**：修复原文和翻译内容混乱问题
  - 增强文本清理功能，移除HTML标签和特殊字符
  - 实现优先级替换列表，提高翻译准确性
  - 确保原文和翻译内容正确分离存储

- **职位描述格式优化**：提高阅读效率
  - 支持序号列表和点列表格式
  - 减少"详情XXX"等冗余标题
  - 智能识别职位描述结构（工作内容、任职要求等）
  - 优化段落分割和格式化

### 9.3 技术改进
- **formatJobDescription函数**：增加列表格式支持
- **segmentJobDescription函数**：智能标题识别
- **displayText函数**：增强文本清理和处理
- **translateText函数**：优化翻译逻辑和准确性

---

*文档版本：v1.1*  
*创建日期：2024年12月*  
*最后更新：2024年12月 - 添加UI优化和内容处理改进*
- **品牌色**：蓝色系 (#3B82F6, #1D4ED8)
- **成功色**：绿色系 (#10B981, #059669)
- **警告色**：橙色系 (#F59E0B, #D97706)
- **错误色**：红色系 (#EF4444, #DC2626)

#### 中性色
- **文本色**：
  - 主文本：#1F2937 (深灰)
  - 次文本：#6B7280 (中灰)
  - 辅助文本：#9CA3AF (浅灰)
- **背景色**：
  - 主背景：#FFFFFF (白色)
  - 次背景：#F9FAFB (浅灰)
  - 卡片背景：#FFFFFF (白色)

#### 暗色模式
- **背景色**：#111827, #1F2937, #374151
- **文本色**：#F9FAFB, #E5E7EB, #9CA3AF
- **边框色**：#374151, #4B5563

### 3.3 字体系统

#### 字体族
- **主字体**：系统默认字体栈
- **代码字体**：等宽字体（如需要）

#### 字体大小
- **标题1**：24px (1.5rem) - 职位标题
- **标题2**：20px (1.25rem) - 区块标题
- **标题3**：18px (1.125rem) - 小标题
- **正文**：16px (1rem) - 主要内容
- **小字**：14px (0.875rem) - 辅助信息
- **微字**：12px (0.75rem) - 标签、状态

#### 字重
- **粗体**：700 - 重要标题
- **半粗**：600 - 次要标题
- **常规**：400 - 正文内容
- **细体**：300 - 辅助信息

### 3.4 间距系统

#### 基础间距单位：4px

#### 常用间距
- **xs**：4px - 紧密元素间距
- **sm**：8px - 小间距
- **md**：16px - 标准间距
- **lg**：24px - 大间距
- **xl**：32px - 超大间距
- **2xl**：48px - 区块间距

#### 内边距
- **按钮**：12px 24px
- **卡片**：24px
- **输入框**：12px 16px

#### 外边距
- **段落间**：16px
- **区块间**：24px
- **页面边距**：24px

### 3.5 组件设计

#### 按钮设计
```css
/* 主要按钮 */
.btn-primary {
  background: linear-gradient(135deg, #3B82F6, #1D4ED8);
  color: white;
  border-radius: 8px;
  padding: 12px 24px;
  font-weight: 600;
  transition: all 0.2s ease;
}

.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
}
```

#### 卡片设计
```css
.card {
  background: white;
  border-radius: 12px;
  border: 1px solid #E5E7EB;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  transition: all 0.2s ease;
}

.card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}
```

#### Tab设计
```css
.tab-active {
  background: white;
  color: #1F2937;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.tab-inactive {
  color: #6B7280;
  background: transparent;
}
```

### 3.6 动画效果

#### 页面动画
- **进入动画**：从右侧滑入，持续300ms
- **退出动画**：向右侧滑出，持续300ms
- **缓动函数**：ease-out

#### 交互动画
- **按钮悬停**：轻微上移 + 阴影增强
- **Tab切换**：淡入淡出，持续200ms
- **加载动画**：骨架屏闪烁效果

#### 微交互
- **收藏按钮**：心形图标填充动画
- **匹配度**：进度条填充动画
- **翻译切换**：文字淡入淡出

## 4. 技术实现

### 4.1 组件结构
```
JobDetailModal/
├── index.tsx              # 主组件
├── components/
│   ├── Header.tsx         # 头部区域
│   ├── JobOverview.tsx    # 职位概览
│   ├── TabNavigation.tsx  # Tab导航
│   ├── JobDescription.tsx # 职位描述
│   ├── CompanyInfo.tsx    # 公司信息
│   └── SimilarJobs.tsx    # 相似职位
├── hooks/
│   ├── useTranslation.ts  # 翻译逻辑
│   └── useJobNavigation.ts # 职位导航
└── utils/
    ├── translation.ts     # 翻译工具
    └── formatting.ts      # 格式化工具
```

### 4.2 状态管理
```typescript
interface JobDetailState {
  activeTab: 'description' | 'company' | 'similar';
  isOriginalLanguage: boolean;
  isLoading: boolean;
  error: string | null;
}
```

### 4.3 性能优化
- **懒加载**：Tab内容按需加载
- **虚拟滚动**：相似职位列表优化
- **缓存策略**：翻译结果缓存
- **防抖处理**：搜索和过滤操作

## 5. 可访问性

### 5.1 键盘导航
- **Tab键**：在可交互元素间导航
- **Enter/Space**：激活按钮和链接
- **Escape**：关闭模态框
- **方向键**：在Tab间切换

### 5.2 屏幕阅读器
- **语义化标签**：使用正确的HTML标签
- **ARIA属性**：添加必要的ARIA标签
- **焦点管理**：合理的焦点顺序
- **状态通知**：操作结果的语音反馈

### 5.3 视觉辅助
- **对比度**：确保文字对比度符合WCAG标准
- **字体大小**：支持浏览器字体缩放
- **色彩辅助**：不仅依赖颜色传达信息
- **动画控制**：支持减少动画偏好设置

## 6. 测试策略

### 6.1 功能测试
- **基础功能**：打开、关闭、导航
- **操作功能**：申请、收藏、分享
- **翻译功能**：语言切换、内容翻译
- **响应式**：不同屏幕尺寸适配

### 6.2 性能测试
- **加载时间**：首次加载和切换速度
- **内存使用**：长时间使用内存泄漏
- **动画性能**：60fps流畅度
- **网络优化**：弱网环境表现

### 6.3 用户体验测试
- **易用性测试**：用户完成任务的效率
- **可访问性测试**：辅助技术兼容性
- **跨浏览器测试**：主流浏览器兼容性
- **移动端测试**：触摸操作体验

## 7. 维护和迭代

### 7.1 数据埋点
- **页面访问**：打开次数、停留时间
- **操作行为**：申请、收藏、分享点击率
- **内容消费**：Tab切换、翻译使用
- **性能指标**：加载时间、错误率

### 7.2 优化方向
- **个性化推荐**：基于用户行为优化相似职位
- **智能翻译**：提升翻译质量和速度
- **交互优化**：基于用户反馈改进交互流程
- **内容丰富**：增加更多职位和公司信息

### 7.3 版本规划
- **v1.0**：基础功能实现
- **v1.1**：性能优化和bug修复
- **v1.2**：新增个性化功能
- **v2.0**：重大功能升级

---

*文档版本：v1.0*  
*创建日期：2024年12月*  
*最后更新：2024年12月*