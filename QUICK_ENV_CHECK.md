# é¢„å‘ç¯å¢ƒå¿«é€Ÿè¯Šæ–­è„šæœ¬

## ğŸ” ä¸€é”®æ£€æŸ¥ç¯å¢ƒé…ç½®

### æ–¹æ³•1ï¼šä½¿ç”¨æµè§ˆå™¨ï¼ˆæœ€ç®€å•ï¼‰

éƒ¨ç½²åˆ°é¢„å‘ç¯å¢ƒåï¼Œè®¿é—®å¥åº·æ£€æŸ¥APIï¼š

```
https://ä½ çš„é¢„å‘åŸŸå.vercel.app/api/health
```

ä¾‹å¦‚ï¼š
```
https://haigoo-git-develop-caitingyue.vercel.app/api/health
```

---

## ğŸ“Š å¦‚ä½•è§£è¯»å¥åº·æ£€æŸ¥ç»“æœ

### âœ… æ­£ç¡®é…ç½®ç¤ºä¾‹ï¼ˆPreviewç¯å¢ƒï¼‰

```json
{
  "status": "healthy",
  "environment": {
    "name": "Preview",              // âœ… åº”è¯¥æ˜¾ç¤º "Preview"
    "vercelEnv": "preview",         // âœ… åº”è¯¥æ˜¯ "preview"
    "isPreview": true               // âœ… åº”è¯¥æ˜¯ true
  },
  "features": {
    "autoTranslation": true,        // âœ… åº”è¯¥æ˜¯ true
    "cronSecret": true,             // âœ… åº”è¯¥æ˜¯ true
    "vercelKV": true,               // âœ… æˆ– "redis": true
    "redis": false
  },
  "recommendations": [],            // âœ… åº”è¯¥ä¸ºç©ºæ•°ç»„ï¼ˆæ— è­¦å‘Šï¼‰
  "summary": "Environment: Preview | Translation: âœ… | Storage: KVâœ…"
}
```

---

### âŒ é”™è¯¯é…ç½®ç¤ºä¾‹ï¼ˆPreviewç¯å¢ƒæœªé…ç½®ï¼‰

```json
{
  "status": "healthy",
  "environment": {
    "name": "Preview",
    "vercelEnv": "preview",
    "isPreview": true
  },
  "features": {
    "autoTranslation": false,       // âŒ ç¿»è¯‘æœªå¯ç”¨ï¼
    "cronSecret": false,            // âŒ Cronå¯†é’¥æœªé…ç½®ï¼
    "vercelKV": false,              // âš ï¸  æ— å­˜å‚¨é…ç½®
    "redis": false
  },
  "recommendations": [
    "âŒ Previewç¯å¢ƒï¼šè‡ªåŠ¨ç¿»è¯‘åŠŸèƒ½æœªå¯ç”¨ï¼è¯·åœ¨Vercelç¯å¢ƒå˜é‡ä¸­ä¸ºPreviewç¯å¢ƒè®¾ç½® ENABLE_AUTO_TRANSLATION=true",
    "âš ï¸ Previewç¯å¢ƒï¼šCronä»»åŠ¡å¯†é’¥æœªé…ç½®ï¼Œæ‰‹åŠ¨è§¦å‘ç¿»è¯‘åŠŸèƒ½å¯èƒ½å—é™ï¼Œè¯·è®¾ç½® CRON_SECRET",
    "ğŸ’¡ Previewç¯å¢ƒï¼šæœªé…ç½®å­˜å‚¨ï¼Œæ•°æ®å°†ä½¿ç”¨å†…å­˜å­˜å‚¨ï¼ˆé‡å¯åä¸¢å¤±ï¼‰"
  ],
  "summary": "Environment: Preview | Translation: âŒ | Storage: âŒ"
}
```

**å¦‚æœçœ‹åˆ°è¿™ç§ç»“æœ**ï¼šè¯´æ˜Previewç¯å¢ƒçš„ç¯å¢ƒå˜é‡æœªæ­£ç¡®é…ç½®ï¼

---

## ğŸ”§ å¿«é€Ÿä¿®å¤æ­¥éª¤

### æ­¥éª¤1ï¼šç¡®è®¤å½“å‰ç¯å¢ƒ

è®¿é—®å¥åº·æ£€æŸ¥APIï¼Œç¡®è®¤ `environment.name` æ˜¯å¦ä¸º `"Preview"`

---

### æ­¥éª¤2ï¼šé…ç½®ç¯å¢ƒå˜é‡

1. ç™»å½• Vercel Dashboard: https://vercel.com/dashboard
2. é€‰æ‹©é¡¹ç›®
3. è¿›å…¥ **Settings** â†’ **Environment Variables**
4. æ·»åŠ ä»¥ä¸‹å˜é‡ï¼ˆ**é‡è¦**ï¼šå‹¾é€‰ `Preview` ç¯å¢ƒï¼‰ï¼š

```bash
# å¿…éœ€é…ç½®
ENABLE_AUTO_TRANSLATION = true
CRON_SECRET = any-secure-string-for-preview

# æ¨èé…ç½®ï¼ˆé€‰æ‹©ä¸€ç§å­˜å‚¨ï¼‰
# æ–¹å¼A: åˆ›å»ºVercel KVï¼ˆæ¨èï¼‰
# Storage â†’ Create Database â†’ KV â†’ åç§°: haigoo-preview-kv
# ä¼šè‡ªåŠ¨ç”Ÿæˆ KV_REST_API_URL å’Œ KV_REST_API_TOKEN

# æ–¹å¼B: ä½¿ç”¨Upstash Redis
REDIS_URL = redis://...
```

**å…³é”®ç‚¹**ï¼šåœ¨æ·»åŠ ç¯å¢ƒå˜é‡æ—¶ï¼Œç¡®ä¿é€‰ä¸­ â˜‘ï¸ **Preview** å’Œ â˜‘ï¸ **Development**

---

### æ­¥éª¤3ï¼šé‡æ–°éƒ¨ç½²

**æ–¹å¼1: åœ¨Vercel Dashboardä¸­é‡æ–°éƒ¨ç½²**
```
Deployments â†’ æ‰¾åˆ°æœ€æ–°çš„Previewéƒ¨ç½² â†’ ç‚¹å‡»å³ä¾§ "..." â†’ Redeploy
```

**æ–¹å¼2: æ¨é€ä»£ç è§¦å‘è‡ªåŠ¨éƒ¨ç½²**
```bash
git checkout develop
git commit --allow-empty -m "chore: trigger redeploy for env vars"
git push origin develop
```

---

### æ­¥éª¤4ï¼šå†æ¬¡æ£€æŸ¥

ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦1-2åˆ†é’Ÿï¼‰ï¼Œå†æ¬¡è®¿é—®ï¼š
```
https://ä½ çš„é¢„å‘åŸŸå.vercel.app/api/health
```

ç¡®è®¤ï¼š
- âœ… `features.autoTranslation` ä¸º `true`
- âœ… `features.cronSecret` ä¸º `true`
- âœ… `recommendations` ä¸ºç©ºæ•°ç»„ `[]`

---

## ğŸ§ª åŠŸèƒ½éªŒè¯æ¸…å•

é…ç½®å®Œæˆåï¼Œä¾æ¬¡éªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š

### 1. åç«¯ç¿»è¯‘åŠŸèƒ½

è®¿é—®ç®¡ç†åå°ï¼š
```
https://ä½ çš„é¢„å‘åŸŸå.vercel.app/admin_team
```

æ­¥éª¤ï¼š
1. ç™»å½•åå°
2. è¿›å…¥ **èŒä½æ•°æ®** â†’ **å¤„ç†åæ•°æ®** æ ‡ç­¾
3. ç‚¹å‡» **"ç¿»è¯‘æ•°æ®"** æŒ‰é’®
4. è§‚å¯Ÿè¿”å›ç»“æœï¼ˆåº”æ˜¾ç¤ºç¿»è¯‘æˆåŠŸçš„ç»Ÿè®¡ä¿¡æ¯ï¼‰

---

### 2. å‰å°æ•°æ®å±•ç¤º

è®¿é—®å‰å°é¡µé¢ï¼š
```
https://ä½ çš„é¢„å‘åŸŸå.vercel.app/
```

æ£€æŸ¥ï¼š
- [ ] **æ¨èé¡µé¢**æ˜¾ç¤ºä¸­æ–‡ç¿»è¯‘çš„å²—ä½ä¿¡æ¯
- [ ] **å…¨éƒ¨å²—ä½**é¡µé¢æ˜¾ç¤ºä¸­æ–‡ç¿»è¯‘çš„å²—ä½ä¿¡æ¯
- [ ] å²—ä½æ ‡é¢˜ã€æè¿°ã€è¦æ±‚ç­‰å­—æ®µå‡ä¸ºä¸­æ–‡
- [ ] æ§åˆ¶å°æ— ä¸¥é‡é”™è¯¯ï¼ˆå¯å¿½ç•¥ "å­˜å‚¨é€‚é…å™¨æœªåˆå§‹åŒ–" è­¦å‘Šï¼‰

---

### 3. æ•°æ®æ¥æºéªŒè¯

æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼ŒæŸ¥çœ‹ **Network** æ ‡ç­¾ï¼š

```
åº”è¯¥çœ‹åˆ°çš„è¯·æ±‚ï¼š
âœ… /api/data/processed-jobs  (ä»åç«¯APIè·å–)

ä¸åº”è¯¥çœ‹åˆ°çš„è¯·æ±‚ï¼š
âŒ ç›´æ¥çš„RSSæºè¯·æ±‚ï¼ˆå¦‚ remoteok.com/rss, nodesk.co/rss ç­‰ï¼‰
```

å¦‚æœçœ‹åˆ°ç›´æ¥çš„RSSè¯·æ±‚ï¼Œè¯´æ˜å‰ç«¯ä»åœ¨å®æ—¶æ‹‰å–æ•°æ®ï¼Œæ¶æ„æœªæ­£ç¡®åˆ‡æ¢ã€‚

---

## ğŸš¨ å¸¸è§é—®é¢˜å¿«é€Ÿè¯Šæ–­

### é—®é¢˜1: `autoTranslation` ä»ä¸º `false`

**åŸå› **: ç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ

**è§£å†³**:
1. æ£€æŸ¥Vercelç¯å¢ƒå˜é‡é…ç½®ä¸­æ˜¯å¦å‹¾é€‰äº† **Preview** ç¯å¢ƒ
2. å˜é‡å€¼æ˜¯å¦ä¸º `true`ï¼ˆå­—ç¬¦ä¸²ï¼Œä¸æ˜¯å¸ƒå°”å€¼ï¼‰
3. é‡æ–°éƒ¨ç½²ï¼ˆé‡è¦ï¼ç¯å¢ƒå˜é‡ä¿®æ”¹åéœ€è¦é‡æ–°éƒ¨ç½²ï¼‰

---

### é—®é¢˜2: å¥åº·æ£€æŸ¥è¿”å› `environment.name: "Production"`

**åŸå› **: è®¿é—®çš„æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œä¸æ˜¯é¢„å‘ç¯å¢ƒ

**è§£å†³**:
- ç¡®è®¤è®¿é—®çš„URLæ˜¯å¦ä¸º `develop` åˆ†æ”¯çš„éƒ¨ç½²URL
- Vercel Dashboard â†’ Deployments â†’ æ‰¾åˆ° `develop` åˆ†æ”¯çš„éƒ¨ç½²
- å¤åˆ¶æ­£ç¡®çš„é¢„å‘ç¯å¢ƒURL

---

### é—®é¢˜3: å‰å°ä»æ˜¾ç¤ºè‹±æ–‡æ•°æ®

**å¯èƒ½åŸå› **:
1. âŒ ç¯å¢ƒå˜é‡æœªé…ç½®/æœªç”Ÿæ•ˆ
2. âŒ æœªé‡æ–°éƒ¨ç½²
3. âŒ æµè§ˆå™¨ç¼“å­˜

**è§£å†³æ­¥éª¤**:
```bash
# 1. ç¡®è®¤å¥åº·æ£€æŸ¥æ˜¾ç¤ºç¿»è¯‘åŠŸèƒ½å·²å¯ç”¨
curl https://your-preview-url.vercel.app/api/health | grep autoTranslation
# åº”æ˜¾ç¤º: "autoTranslation": true

# 2. æ‰‹åŠ¨è§¦å‘ç¿»è¯‘
curl -X POST https://your-preview-url.vercel.app/api/cron/sync-jobs

# 3. æ¸…ç©ºæµè§ˆå™¨ç¼“å­˜å¹¶ç¡¬åˆ·æ–°ï¼ˆCmd+Shift+R æˆ– Ctrl+Shift+Rï¼‰
```

---

### é—®é¢˜4: "ç¿»è¯‘æ•°æ®"æŒ‰é’®æ— å“åº”

**æ£€æŸ¥**:
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. æŸ¥çœ‹ **Console** æ ‡ç­¾æ˜¯å¦æœ‰é”™è¯¯
3. æŸ¥çœ‹ **Network** æ ‡ç­¾ï¼Œæ£€æŸ¥ `/api/cron/sync-jobs` è¯·æ±‚çš„å“åº”

**å¸¸è§é”™è¯¯**:
- `401/403`: CRON_SECRET æœªé…ç½®æˆ–ä¸åŒ¹é…
- `500`: åç«¯ç¿»è¯‘æœåŠ¡å¼‚å¸¸
- `429`: Googleç¿»è¯‘APIè¯·æ±‚è¿‡å¤šï¼ˆç­‰å¾…åé‡è¯•ï¼‰

---

## ğŸ“‹ è¯Šæ–­ç»“æœè®°å½•æ¨¡æ¿

å®Œæˆæ£€æŸ¥åï¼Œå¯ä»¥è®°å½•ç»“æœï¼š

```
æ£€æŸ¥æ—¶é—´: ___________
é¢„å‘ç¯å¢ƒURL: ___________

å¥åº·æ£€æŸ¥ç»“æœ:
â–¡ environment.name = "Preview"
â–¡ features.autoTranslation = true
â–¡ features.cronSecret = true
â–¡ features.vercelKV æˆ– redis = true
â–¡ recommendations = []

åŠŸèƒ½éªŒè¯:
â–¡ ç®¡ç†åå°æœ‰"ç¿»è¯‘æ•°æ®"æŒ‰é’®
â–¡ ç‚¹å‡»ç¿»è¯‘æŒ‰é’®æˆåŠŸæ‰§è¡Œ
â–¡ å‰å°æ¨èé¡µé¢æ˜¾ç¤ºä¸­æ–‡
â–¡ å…¨éƒ¨å²—ä½é¡µé¢æ˜¾ç¤ºä¸­æ–‡
â–¡ Networkè¯·æ±‚èµ°/api/data/processed-jobs
â–¡ æ— ç›´æ¥RSSè¯·æ±‚

é—®é¢˜è®°å½•:
___________
___________
```

---

## ğŸ†˜ ä»æ— æ³•è§£å†³ï¼Ÿ

### è·å–è¯¦ç»†æ—¥å¿—

1. **Vercelå‡½æ•°æ—¥å¿—**
   ```
   Vercel Dashboard â†’ Deployments â†’ 
   é€‰æ‹©Previewéƒ¨ç½² â†’ Runtime Logs
   ```

2. **æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—**
   ```
   F12 â†’ Console â†’ æˆªå›¾æ‰€æœ‰çº¢è‰²é”™è¯¯
   ```

3. **ç½‘ç»œè¯·æ±‚**
   ```
   F12 â†’ Network â†’ 
   æ‰¾åˆ°å¤±è´¥çš„è¯·æ±‚ â†’ æŸ¥çœ‹ Response
   ```

### è”ç³»æ”¯æŒæ—¶æä¾›

- [ ] å¥åº·æ£€æŸ¥APIçš„å®Œæ•´JSONå“åº”
- [ ] Vercelç¯å¢ƒå˜é‡é…ç½®æˆªå›¾ï¼ˆéšè—æ•æ„Ÿå€¼ï¼‰
- [ ] æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯æˆªå›¾
- [ ] ç½‘ç»œè¯·æ±‚å¤±è´¥çš„å“åº”æˆªå›¾

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-11-12
**é€‚ç”¨ç¯å¢ƒ**: Preview & Development

