# 🌐 Mock翻译服务说明

## 📋 更新内容

由于Google翻译API在Vercel环境中不稳定，已切换至**内置Mock翻译服务**。

### ✨ Mock翻译服务特点

1. **零成本**：无需任何API密钥或付费订阅
2. **零网络依赖**：无需外部网络请求，响应速度快
3. **100%稳定**：在任何环境（生产、预发、本地）都能正常运行
4. **覆盖率高**：内置150+常用职位术语翻译字典

---

## 📚 翻译字典覆盖范围

### 职位类型（50+）
- **开发类**：软件工程师、前端/后端/全栈开发、DevOps、移动开发、云计算等
- **数据/AI类**：数据科学家、数据工程师、机器学习工程师、AI工程师等
- **产品/设计类**：产品经理、UI/UX设计师、平面设计师等
- **其他技术类**：测试工程师、安全工程师、架构师、技术主管等
- **业务类**：销售、市场营销、客户成功、内容编辑等

### 工作类型
- 全职、兼职、合同、自由职业、临时、实习

### 常用术语（100+）
- 经验等级：入门级、中级、高级、专家等
- 职责相关：要求、职责、经验、技能、资格等
- 工作方式：远程工作、弹性工作、混合办公等
- 福利待遇：竞争力薪资、健康保险、股票期权、职业发展等

---

## 🔄 翻译工作原理

### 翻译策略
1. **词汇匹配**：使用150+词条的翻译字典进行智能替换
2. **保留原文**：对无法匹配的专业术语保持原文（如公司名、技术栈）
3. **标记翻译**：未完全翻译的内容会添加 `[译]` 前缀，便于识别

### 示例
**原文**：
```
Senior Software Engineer - Remote
We are looking for an experienced Full Stack Developer.
```

**翻译后**：
```
高级 软件工程师 - 远程
我们正在寻找 一个 有经验 全栈开发工程师.
```

---

## 🧪 部署后验证步骤

### 1. 检查翻译服务状态

访问诊断接口（GET请求）：
```
https://haigoo-remote-git-develop-<你的vercel子域>.vercel.app/api/cron/sync-jobs
```

**预期返回**：
```json
{
  "success": true,
  "translationServiceType": "mock",
  "isMock": true,
  "message": "使用 Mock 翻译服务（测试用途）",
  "timestamp": "2025-11-12T14:39:44.222Z"
}
```

✅ 如果看到 `"translationServiceType": "mock"` 和 `"success": true`，说明服务已正常加载。

---

### 2. 触发翻译任务

在管理后台（`https://haigoo-remote-git-develop-<你的vercel子域>.vercel.app/admin_team`）：

1. 进入**【处理后数据】**标签页
2. 点击**【翻译数据】**按钮
3. 等待翻译完成（通常5-10秒）

**预期结果**：
- ✅ 按钮显示"翻译中..."
- ✅ 完成后显示成功提示
- ✅ 岗位列表显示中文翻译内容
- ✅ Network面板返回 `200` 状态码

**返回数据示例**：
```json
{
  "success": true,
  "message": "定时任务完成",
  "translationServiceType": "mock",
  "stats": {
    "totalJobs": 29,
    "translatedJobs": 29,
    "skippedJobs": 0,
    "failedJobs": 0,
    "duration": "1308ms"
  },
  "step": "merge-and-save",
  "timestamp": "2025-11-12T14:40:00.000Z"
}
```

---

### 3. 验证前端显示

访问前端页面（`https://haigoo-remote-git-develop-<你的vercel子域>.vercel.app`）：

1. **推荐页面**：应显示翻译后的岗位标题和描述
2. **全部岗位页面**：所有岗位都应该是中文内容
3. **岗位详情**：点击任意岗位，详情弹窗应显示中文

**验证要点**：
- ✅ 岗位标题包含中文（如"高级"、"工程师"等）
- ✅ 工作类型显示中文（如"全职"、"远程"等）
- ✅ 岗位描述部分内容翻译成中文
- ✅ 公司名称保持英文原文（不翻译）

---

## 🚨 常见问题

### Q1: 翻译不够准确？
**A**: Mock服务使用词典翻译，适合常见术语。对于复杂句子，可能需要：
- 后续扩展翻译字典（添加更多词条）
- 或考虑集成其他翻译服务（如LibreTranslate开源方案）

### Q2: 部分内容没有翻译？
**A**: 这是正常的：
- **公司名称**：刻意保持英文，避免误解
- **专业术语**：如技术栈名称（React、AWS等）保持原文
- **特殊词汇**：不在字典中的词汇会保留原文，并添加 `[译]` 前缀

### Q3: 如何添加更多翻译词条？
**A**: 编辑 `lib/services/translation-service-mock.cjs` 文件，在 `translationDict` 对象中添加：
```javascript
const translationDict = {
  // ... 现有词条
  'New Term': '新术语',
  'Another Term': '另一个术语',
}
```

---

## 🔮 未来优化方向

### 短期（建议1-2周内）
1. **扩展翻译字典**
   - 根据实际岗位内容，持续添加高频词汇
   - 可以分析未翻译的原文，提取常见术语

2. **优化翻译逻辑**
   - 改进词汇匹配算法（支持词组、上下文）
   - 添加智能断句和语序调整

### 中期（建议1-2月内）
1. **集成开源翻译服务**
   - **LibreTranslate**：开源、可自托管、免费API
   - **Argos Translate**：离线翻译库，无网络依赖
   - **MyMemory**：免费翻译API（每天1000次请求）

2. **混合翻译策略**
   - 职位标题：Mock字典翻译（快速、准确）
   - 职位描述：开源API翻译（更自然的句子）
   - 公司名称：保持原文（不翻译）

---

## 📞 支持

如果遇到任何问题，请提供以下信息：
1. 访问诊断接口的返回结果
2. 点击"翻译数据"后的Network响应
3. 前端页面截图（显示未翻译或翻译错误的内容）

这将帮助快速定位问题并优化翻译效果。

---

## ✅ 部署检查清单

- [ ] Vercel预发环境部署成功
- [ ] GET `/api/cron/sync-jobs` 返回 `"success": true`
- [ ] 后台点击"翻译数据"成功完成（200状态码）
- [ ] 推荐页面显示中文翻译内容
- [ ] 全部岗位页面显示中文翻译内容
- [ ] 岗位详情弹窗显示中文翻译内容
- [ ] 公司名称保持英文（未翻译）
- [ ] 控制台无500或401错误

**全部完成后，系统即可正常使用！** 🎉

